<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="partials/layout.html">
<head th:insert="~{partials/sideBar  :: header}">
    <title>Member List</title>

</head>
<body>
 <div layout:fragment="content">
                <div class="search-field d-none d-md-block">
                    <form th:action="@{/search}" method="get" class="d-flex align-items-center mb-2 h-100">
                        <div class="input-group">
                            <div class="input-group-prepend bg-transparent">
                                <i class="input-group-text border-0 bg-transparent pt-2 bi bi-search"></i>
                            </div>
                            <input type="text" class="form-control bg-transparent border-0" name="keyword"
                                   th:value="${keyword}" placeholder="Chercher">
                        </div>
                    </form>
                </div>
                <button class="text-bg-light float-end mb-3 btn btn-primary " data-toggle="modal"
                        data-target="#exampleModal"><i class="bi bi-person-plus"></i></button>

                <table class="table table-centered table-hover table-responsive  table-nowrap mb-0 rounded">
                    <tr>
                        <th>Id</th>
                        <th>User</th>
                        <th>address</th>
                        <th>cin</th>
                        <th>dob</th>
                        <th>tele</th>
                        <th>Gender</th>
                        <th>password</th>
                        <th>Abonnement</th>
                        <th colspan="2">Action</th>
                    </tr>
                    <tr th:each="m:${listMember}">
                        <td th:utext="${m.getId()}"></td>
                        <td>
                        <div class="d-flex align-items-center">
                            <img th:if="${m.pic}"  alt="user icon" th:src="@{'images/'+${m.pic}}">
                            <div class="d-block px-2">
                                <span class="fw-bold" th:utext="${m.getName()}+''+${m.getLname()}" ></span>
                                <div class="small text-gray" th:utext="${m.getEmail()}"></div>
                            </div>
                        </div>
                        </td>

                        <!--<td class="py-1"><img th:if="${m.pic}"  alt="user icon" th:src="@{'images/'+${m.pic}}"></td>
                        <td th:utext="${m.getName()}"></td>
                        <td th:utext="${m.getLname()}"></td>
                        <td th:utext="${m.getEmail()}"></td>-->
                        <td th:utext="${m.getAdress()}"></td>
                        <td th:utext="${m.getCin()}"></td>
                        <td th:utext="${m.getDob()}"></td>
                        <td th:utext="${m.getTele()}"></td>
                        <td th:utext="${m.getGender()}"></td>
                        <td th:utext="${m.getPassword()}"></td>
                        <td th:utext="${m.abonnement}"></td>
                        <td><a onclick="return confirm('Vous avez sure?')" class="btn btn-danger"
                               th:href="@{/deleteMember(id=${m.id},keyword=${keyword}, page=${currentPage})}"> <i
                                class="bi bi-trash"></i></a></td>
                        <td><a th:href="@{/editMember(id=${m.id})} " class="btn btn-info">
                            <i class="bi bi-pencil"></i></a></td>
                        </td>


                    </tr>
                </table>
                <ul class="nav nav-pills">
                    <li th:each="page,status:${pages}">
                        <a
                                th:class="${status.index==currentPage?'btn btn-info ms-1':'btn btn-outline-info ms-1'}"
                                th:href="@{/index(page=${status.index}, keyword=${keyword})}"
                                th:text="${status.index}">
                        </a>
                    </li>
                </ul>


            <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                 aria-hidden="true" >
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Add member</h5>
                            <button type="button" class="btn btn-close" data-dismiss="modal" aria-label="Close">

                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="card align-content-center">
                                <div class="card-body">
                                    <form th:action="@{/addMember}"
                                          th:object="${MemberForm}" method="POST" enctype="multipart/form-data">
                                        <!--              <label class="form-label">Image:</label>-->
                                        <!--              <input type="file" name="pic" accept="image/*"><br>-->
                                        <label class="form-label">Nom:</label>
                                        <input class="form-control" type="text" th:field="*{name}"/>
                                        <label class="form-label">Prenom:</label>
                                        <input class="form-control" type="text" th:field="*{lname}"/>
                                        <label class="form-label">email:</label>
                                        <input class="form-control" type="text" th:field="*{email}"/>
                                        <label class="form-label">adress:</label>
                                        <input class="form-control" type="text" th:field="*{adress}"/>
                                        <label class="form-label">cin:</label>
                                        <input class="form-control" type="text" th:field="*{cin}"/>
                                        <label class="form-label">dob:</label>
                                        <input class="form-control" type="date" th:field="*{dob}"/>
                                        <label class="form-label">tele:</label>
                                        <input class="form-control" type="number" th:field="*{tele}"/>

                                        <label class="form-label">Password:</label>
                                        <input class="form-control" type="password" th:field="*{password}"/>
                                        <label class="form-label">Confirm password:</label>
                                        <input class="form-control" type="password"/>
                                        <label class="form-label">Abonnement</label>
                                        <select name="abonnement" id="abonnement" class="form-control mb-3">
                                            <option th:each="abonnement :${abos}" th:value="${abonnement.id}"
                                                    th:text="${abonnement.nameAb}"></option>
                                        </select>

                                        <div class="mb-3 mt-3">
                                            <label class="form-label">Image</label>
                                            <input type="file" class="form-control  "
                                                   id="image" accept="image/png, image/jpeg" name="file"/>
                                        </div>
                                        <label class="form-label">Gender:</label>

                                        <div class="form-check">

                                            <input class="form-check-input" type="radio" name="flexRadioDefault"
                                                   value="female" id="flexRadioDefault1" th:field="*{gender}">
                                            <label class="form-check-label" for="flexRadioDefault1">
                                                Female
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="flexRadioDefault"
                                                   value="male" id="flexRadioDefault2" th:field="*{gender}" checked>
                                            <label class="form-check-label" for="flexRadioDefault2">
                                                Male
                                            </label>
                                        </div>

                                        <input type="submit" class="btn btn-primary mt-2" value="Ajouter"/>
                                    </form>

                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>

                        </div>
                    </div>
                </div>
            </div>
 </div>
</body>
</html>